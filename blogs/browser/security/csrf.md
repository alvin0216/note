---
title: 什么是 CSRF 攻击？
date: 2020-11-20 20:39:27
sidebar: 'auto'
tags:
  - csrf
  - 写作中
  - 浏览器安全
categories:
  - 浏览器
---

XSS 攻击只要做好防御措施，例如把 Cookie 设置成 httpOnly 并且对用户输入进行过滤的话，XSS 攻击往往就无从下手，但是却防不住 CSRF 攻击，CSRF 本质上来说是黑客诱导用户点击，敬而利用用户的登录状态搞事情。大概思路如下：

1. 受害者登录目标网站，保存了该网站的登录状态
2. 攻击者诱导受害者进入第三方网站，向被攻击网站发送跨站请求
3. 由于用户已登录, 该跨站请求被成功执行

```js
+-------------------+
| 用户登录网站 A      |     给 Kobe 转账 '/pay?name=Kobe'
+---------+---------+
          |
       黑客诱导
          |
+---------v----------+
| 用户打开黑客网站 B    |    黑客网站里 img 标签指向转账的请求
+--------------------+    修改转账对象为黑客本身.. '/pay?name=黑客'
                                  +
                                  |
                                  v
                          +-------+-------+
                          | 转账到黑客本身  |
                          +---------------+
```
