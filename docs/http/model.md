---
title: TCP/IP 五层网络模型
date: 2020-03-28 23:11:35
---

在每一台电脑，每个服务器都有这这几个网络模型层级来维护整个网络数据传输过程。

![](../../assets/http/model.png)

## 应用层

应用层：应用层的任务是通过应用进程间的交互来完成特定网络应用。应用层协议定义的是应用进程（进程：主机中正在运行的程序）间的通信和交互的规则。
对于不同的网络应用需要不同的应用层协议。在互联网中应用层协议很多，如域名系统 DNS，支持万维网应用的 HTTP 协议，支持电子邮件的 SMTP 协议等等。我们把应用层交互的数据单元称为报文。

### 域名系统

域名系统是因特网的一项核心服务，它作为可以将域名和 IP 地址相互映射的一个分布式数据库，能够使人更方便的访问互联网，而不用去记住能够被机器直接读取的 IP 数串。

### HTTP 协议

超文本传输协议（`HTTP，HyperText Transfer Protocol`)是互联网上应用最为广泛的一种网络协议。所有的 WWW 文件都必须遵守这个标准。设计 `HTTP` 最初的目的是为了提供一种发布和接收 `HTML` 页面的方法。

### 其他协议

`FTP`、`SMTP`、`POP3`...

## 运输层

**运输层的主要任务就是负责向两台主机进程之间的通信提供通用的数据传输服务。**

运输层主要使用以下两种协议：

1. 传输控制协议 `TCP`（`Transmisson Control Protocol`）--提供面向连接的，可靠的数据传输服务。
2. 用户数据协议 `UDP`（`User Datagram Protocol`）--提供无连接的，尽最大努力的数据传输服务（不保证数据传输的可靠性）。

### UDP

1. `DP` 是无连接的；
2. `UDP` 使用尽最大努力交付，即不保证可靠交付，因此主机不需要维持复杂的链接状态（这里面有许多参数）；
3. `UDP` 是面向报文的；
4. `UDP` 没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如 IP 电话，实时视频会议等）；
5. `UDP` 支持一对一、一对多、多对一和多对多的交互通信；
6. `UDP` 的首部开销小，只有 8 个字节，比 TCP 的 20 个字节的首部要短

### TCP

1. `TCP` 是面向连接的。（就好像打电话一样，通话前需要先拨号建立连接，通话结束后要挂机释放连接）；
2. 每一条 `TCP` 连接只能有两个端点，每一条 `TCP` 连接只能是点对点的（一对一）；
3. `TCP` 提供可靠交付的服务。通过 `TCP` 连接传送的数据，无差错、不丢失、不重复、并且按序到达；
4. `TCP` 提供全双工通信。TCP 允许通信双方的应用进程在任何时候都能发送数据。TCP 连接的两端都设有发送缓存和接收缓存，用来临时存放双方通信的数据；
5. 面向字节流。TCP 中的“流”（stream）指的是流入进程或从进程流出的字节序列。“面向字节流”的含义是：虽然应用程序和 TCP 的交互是一次一个数据块（大小不等），但 TCP 把应用程序交下来的数据仅仅看成是一连串的无结构的字节流。

## 网络层

**网络层负责为分组交换网上的不同主机提供通信服务。在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组和包进行传送。在 TCP/IP 体系结构中，由于网络层使用 IP 协议**，因此分组也叫 **IP 数据报**，简称**数据报**。

## 数据链路层

> 物理寻址，同时将原始比特流变成逻辑传输电路

前面说了，物理层它只是单纯着负责把计算机连接起来，并且在计算机之间传输 0，1 这样的电信号。如果这些 0，1 组合的传送毫无规则的话，计算机是解读不了的。一大堆 0，1 谁知道是什么鬼啊。

![](../../assets/http/datalink.png)

因此，我们需要制定一套规则来进行 0，1 的传送。例如多少个电信号为一组啊，每一组信号应该如何标识才能让计算机读懂啊等等。

数据链路层的主要协议有：

1. 点对点协议（Point-to-Point Protocol);
2. 以太网（Ethernet);
3. 高级数据链路协议(High-Level Data Link Protocol);
4. 帧中继（Frame Relay);
5. 异步传输模式(Asynchronous Transfer Mode);

### 以太网协议

以太网协议规定，一组电信号构成一个数据包，我们把这个数据包称之为**帧**。每一个桢由标头(Head)和数据(Data)两部分组成。

![](../../assets/http/frame.png)

帧的大小一般为 64 - 1518 个字节。假如需要传送的数据很大的话，就分成多个桢来进行传送。

标头部分主要是一些说明数据，例如发送者，接收者等信息。而数据部分则是这个数据包具体的，想给接守者的内容。

一个桢的长度是 64~1518 个字节，也就是说桢的长度不是固定的，标头部分的字节是固定的，并且固定为 18 个字节。

把一台计算的的数据通过物理层和链路层发送给另一台计算机，究竟是谁发给谁的，计算机与计算机之间如何区分，，你总得给他们一个唯一的标识吧？

于是，MAC 地址出现了。

#### MAC 地址

连入网络的每一个计算机都会有网卡接口，每一个网卡都会有一个唯一的地址，这个地址就叫做 MAC 地址。计算机之间的数据传送，就是通过 MAC 地址来唯一寻找、传送的。

MAC 地址 由 48 个字节所构成，在网卡生产时就被唯一标识了。

## 物理层

> 将信息编码成电流脉冲或其它信号用于网上传输；（电线、光缆等）

一台计算机与另一台计算机要进行通信，第一件要做的事是什么？当然是要把这台计算机与另外的其他计算机连起来啊，这样，我们才能把数据传输过去。例如可以通过光纤啊，电缆啊，双绞线啊等介质把他们连接起来，然后才能进行通信。

也就是说，物理层负责把两台计算机连起来，然后在计算机之间通过高低电频来传送 0,1 这样的电信号。
