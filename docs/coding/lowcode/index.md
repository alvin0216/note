---
title: 相关资料与个人思考
date: 2021-06-29 10:54:23
sidebar: auto
tags:
  - 低代码平台
categories:
  - 开发实录
---

<!-- <Time /> -->

## 相关资料

- 相关资料
  - [【阿里巴巴淘系技术】前端智能化看“低代码/无代码”](https://juejin.cn/post/6959794588898820127)
  - [国内低代码平台](https://github.com/taowen/awesome-lowcode)
  - [如何设计实现 H5 营销页面搭建系统](https://mp.weixin.qq.com/s/jS1_axYqFkngwRLwz48FwA)
  - [花椒低代码可视化编辑平台的设计与实践](https://mp.weixin.qq.com/s/O3VvId5xMWrRjug8S-yq_A)
  - [【React 个人版】H5 活动页面快速生成神器——Mocha](https://juejin.cn/post/6938340932408311845)
  - [【React 个人版】react 打造页面可视化搭建 1 - 提纲 持续更新](https://juejin.cn/post/6844904155220279303)
- 拖拽
  - [可视化拖拽组件库一些技术要点原理分析](https://juejin.cn/post/6908502083075325959)
  - [可视化拖拽组件库一些技术要点原理分析（二）](https://juejin.cn/post/6918881497264947207)
  - [可视化拖拽组件库一些技术要点原理分析（三）](https://juejin.cn/post/6929302655118344200)
  - [可视化搭建平台之跨 iframe 拖拽](https://juejin.cn/post/6933385955789406222)
- 动态物料
  - [动态表单之表单组件的插件式加载方案](https://juejin.cn/post/6924829595006926856)
  - [微前端 动态加载远程组件](https://zh-hans.single-spa.js.org/docs/getting-started-overview)
  - [react-vue-micro-frame](https://github.com/y805939188/react-vue-micro-frame)
  - [揭秘 vivo 如何打造千万级 DAU 活动中台 - 启航篇](https://xie.infoq.cn/article/2eac85154f18010da98cb8301)
- 案例
  - [云凤蝶可视化搭建的推导与实现](https://zhuanlan.zhihu.com/p/90746742)
  - [云凤蝶中台研发提效实践](https://zhuanlan.zhihu.com/p/78425921)

## 实现点

基于原型对项目设计进行了功能的铺平，其实还是围绕**组件、画布、属性面板**这三块。

- **moda-decoreate：也即编辑器的设计思路**
  - 画布区域如何渲染已添加到画布中的组件（组件库组件会很多，画布中可能只需添加几个组件，考虑如何做动态渲染）？
  - 组件从左侧拖入画布区域，选中组件，就可知道该组件关联的属性。组件 Schema 如何设计？
  - 画布区域和预览时组件的渲染是否可共用一套渲染逻辑？
  - 组件的数据如何去维护（考虑添加组件、删除组件、组件渲染/预览等场景）
  - 组件库如何维护（考虑新增组件满足业务需要的场景）
  - 如何做到纯组件
- **物料市场如何设计**
  - 如何动态加载组件，**>> 插拔式的设计，我们希望添加新的自定义组件之后可以不需要重新发布项目，只需要单独发布自定义组件，然后在系统中注册该自定义组件，就能在配置页面的时候直接使用了。**
  - 提供物料生成的方式，这里我采用的是通过开发 node 交互式的脚本命令，将打包后的 umd 文件快速上传到物料市场。
- **进阶**
  - 如何基于可视化底盘去探索 10 倍效能提升？

### schema 如何设计存放在哪里？

### 如何设计物料市场？

分为前中后期。

- 前期实现如 npm 包导入的方式，缺点是无法实现运行时加载，而且编辑器需要频繁打包。
- 中期：将编辑器打包出去，当作组件包的方式给予开发者使用，优点开发者可以随意插入物料和自定义组件，只是复用编辑器的逻辑产生 renderData，
- 后期：通过动态加载的方式，使得编辑器的兼容性更强，不需要再重复打包而且高复用物料市场。

### 如何快速开发物料，并上传到物料市场？

这里我的思路是：开发一个 cli 工具，读取组件 package.json。上传打包好的组件到物料市场，name+version 目前增量式的增加物料。

### 物料如何动态渲染？

这里分为`编译时加载`和`运行时加载`，如 React 在 umi 下有 `dynamic` ，底层其实也是 `webpack code splitting`，进行代码分割，而 vue 也可以通过 `<component :is="ComponantName" />`，而这些在编译时就必须存在，好处就是内置，加载快，上手成本低。

而在业务频繁迭代过程中，**是否每修改一次组件，就要去重新打包项目 发个版本呢？** 这是需要考虑到的一点，所以运行时加载尤其重要。

这里我有两个方面去设计，第一通过微前端的方式进行载入，由于我掌握的知识有限，所以并未实现下去。第二，通过 UMD 的方式动态载入组件，这一点倒是实现了。

继续思考，一个页面如果有 10 个物料的话，是不是就得动态加载 10 个静态资源呢，如果每个组件都有一个 JS，一个 CSS。那就是 20 个。这是不具备可行性的。所以就有了物料合并的需求。

如何做呢？用户通过在注册的 code，然后关联相关物料，这个时候就可以确认当前 code 有什么物料了，此时我们只需要在配一个后端，监听到物料集合修改后针对性统一打包就可以了。不过也是风险极高，这得约定好打包的配置是一致的。
