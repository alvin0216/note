---
title: 文件操作漏洞
date: 2020-09-06 18:47:27
---

在开发中文件上传下载是比较常见的功能，但也可能存在一些漏洞。

## 文件上传漏洞

比如上传头像、上传附件等等。

举一个场景，上传头像。我们上传一个 php 文件到 php 环境中，此时再获取个人信息，发现头像获取失败，但是复制头像地址后再浏览器中打开，发现这个文件居然被执行了。

```js
+---------+   +-------------+   +---------------------------+
| 上传头像  +---> 传 php 文件 +-->  获取头像链接，重新打开地址。   |
+---------+   +-------------+   +---------------------------+
```

此时黑客可以通过上传一些监控脚本或者其他危害性操作的 php 文件到服务器中进行监控，这是多么危险的操作啊。

也就是说什么环境上传什么可执行文件。假如是 `bash` 文件，很有可能将系统给搞崩了。`rm -rf /`

## 文件下载漏洞

文件下载也是常用的功能，不做验证或者限制的话我们的源码、配置文件等..

```JS
获取下载链接 --> 修改下载地址 --> 下载配置文件
```

## 预防

限制文件上传类型，bash 文件的安全过滤。。。

下载文件权限认定，+ token 之类的。。。
