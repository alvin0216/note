---
title: 低代码中遇到的问题
date: 2021-06-29 10:54:23
sidebar: auto
tags:
  - 低代码平台
categories:
  - 技术漫谈
---

## 低代码平台的难题和局限性

- 低代码平台在面向模型设计时模型和业务匹配度往往决定其上线。
- 平台的易用性和业务灵活性很难调和，过于简单的设计虽然方便使用遇到复杂场景时又会束手无策。过于灵活的设计看起来功能强大又难免会让业务专家难上手。
- 各种低代码平台很难形成统一的标准去开发和运营，导致用户接入不同低代平台都需要学习成本。
- 对于复杂度极高的业务场景低代码平台实现起来有些力不从心。

## 遇到过什么问题 怎么解决的？

数据传输 postMessage ...

### 跨 iframe 拖拽的一个实现

1. 借用原生 h5 拖拽的实现

业界比较知名的拖拽插件 [react-dnd]() 不是很支持跨 iframe 的一个拖拽，而且低代码平台的设计里面是跨框架的，所以会采用原生的方式实现，

实现过程中，render 层拖拽（v1 版本 同事实现的）物料拖入的位置仅仅支持拖拽到物料的上一层，以及放置面板会发生闪烁的情况（具体原因忘记了）

![](https://alvin-cdn.oss-cn-shenzhen.aliyuncs.com/images/drag.png)

**我的实现**，在 `container` 层增加的 `drop` 事件，判断 `target` 对象。如果是物料，那么 `dropIndex` 在 `target` 的上一层，否则于最后一个。

### 物料的动态导入功能

第一版的实现：通过懒加载 npm 包的方式进行加载物料。部署阶段：1. 部署拖拽层 => iframe 层 => 生产环境。

优化点 远程加载 umd & 微前端。

打包成 umd 的方式，我写了一个**脚手架**，快速生成物料模板以及上传到 cdn 等等。

### 灰度发布

物料版本更新，在 v1 版本生成后的渲染数据，和 v2 版本不同怎么办？

**原则上只做向下兼容，也就只增不减、如果差异大则考虑拆分。**

灰度会明显拉长产品发布的周期，灰度过程本身很复杂，灰度操作很容发生错误，如果遇到数据不兼容的时候，要考虑数据回滚。

灰度需要考虑 2 个点：低代码灰度 & 生产灰度。>>> 成本太高 不做灰度

### 安全问题

umd 物料，加载问题。有人攻击了请求，篡改 umd 地址！

解决：umd 域名安全控制，请求白名单等。

## 有做过性能优化吗？优化的指标是什么

1. 统计过，同时加载 1000 个物料 ，并无卡顿。内部做了防抖以及节流。

**还可以优化的的点**

1. vscode 的物料模板的语法快捷提示。
2. 物料生态。
3. 错误监控

## 参考了哪些，有什么优势

参考有赞商城装修，优势：

1. 百分百契合企业，接口 数据源等。
2. 支持远程的 umd 加载，并且 sdk 支持到各个管理系统植入
