(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{773:function(e,t,o){"use strict";o.r(t);var n=o(7),v=Object(n.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h2",{attrs:{id:"useeffect-依赖执行关系"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#useeffect-依赖执行关系"}},[e._v("#")]),e._v(" useEffect 依赖执行关系")]),e._v(" "),o("p",[o("code",[e._v("useEffect")]),e._v(" 第二个参数[]如何影响 fn 的执行？换句话说，它的第二个参数是如何影响 "),o("code",[e._v("fiber")]),e._v(" 创建 "),o("code",[e._v("Passive Effect")]),e._v(" 的？")]),e._v(" "),o("ol",[o("li",[e._v("不包含第二个参数 "),o("code",[e._v("useEffect(() => {})")]),e._v("，"),o("code",[e._v("Mount")]),e._v(" & "),o("code",[e._v("Update")]),e._v(" 时，每次 "),o("code",[e._v("render")]),e._v(" 时都会创建一个 "),o("code",[e._v("Passive Effect")]),e._v(";")]),e._v(" "),o("li",[e._v("包含一个空数组[]作为依赖项 "),o("code",[e._v("useEffect(() => {}, [])")]),e._v("，它会在 "),o("code",[e._v("mount")]),e._v(" 时，创建 "),o("code",[e._v("Passive Effect")])]),e._v(" "),o("li",[e._v("包含一个依赖项"),o("code",[e._v("[dep]")]),e._v("，它会在 mount 时，dep 依赖项变化时，创建 Passive Effect")])]),e._v(" "),o("h2",{attrs:{id:"fn-和-componentdidmount-的执行时机分别是什么"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#fn-和-componentdidmount-的执行时机分别是什么"}},[e._v("#")]),e._v(" fn 和 componentDidMount 的执行时机分别是什么？")]),e._v(" "),o("p",[o("strong",[e._v("过程")])]),e._v(" "),o("p",[e._v("render 阶段到 commit 阶段，传递的时包含不同 fiber 节点的 effect 的链表，commit 阶段时将状态变化（Effect）渲染在视图中")]),e._v(" "),o("ul",[o("li",[e._v("渲染视图前，beforeMutation 阶段")]),e._v(" "),o("li",[e._v("渲染视图中，mutation 阶段，Placement 会执行 appendChild，DOM 节点插入到视图中")]),e._v(" "),o("li",[e._v("渲染视图后，layout 阶段，调用 componentDidMount")])]),e._v(" "),o("ol",[o("li",[e._v("useEffect 时 commit 完成后异步调用")]),e._v(" "),o("li",[e._v("componentDidMount 是 commit 阶段完成视图更新（mutation 阶段）后，在 layout 阶段同步调用")]),e._v(" "),o("li",[e._v("useLayoutEffect 和 componentDidMount 调用时机一致，也是在 layout 阶段同步调用")])]),e._v(" "),o("p",[o("img",{attrs:{src:"https://alvin-cdn.oss-cn-shenzhen.aliyuncs.com/images/hooks-api.png",alt:""}})]),e._v(" "),o("h2",{attrs:{id:"相关文章"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#相关文章"}},[e._v("#")]),e._v(" 相关文章")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://www.yuque.com/lxylona/note/tlc8hz#RnPvS",target:"_blank",rel:"noopener noreferrer"}},[e._v("React Hooks: 深入剖析 useMemo 和 useEffect"),o("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=v.exports}}]);