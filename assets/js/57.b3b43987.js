(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{623:function(v,t,_){"use strict";_.r(t);var a=_(6),r=Object(a.a)({},(function(){var v=this,t=v.$createElement,_=v._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h2",{attrs:{id:"遇到过什么问题-怎么解决的"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#遇到过什么问题-怎么解决的"}},[v._v("#")]),v._v(" 遇到过什么问题 怎么解决的？")]),v._v(" "),_("p",[v._v("数据传输 postMessage ...")]),v._v(" "),_("h3",{attrs:{id:"跨-iframe-拖拽的一个实现"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#跨-iframe-拖拽的一个实现"}},[v._v("#")]),v._v(" 跨 iframe 拖拽的一个实现")]),v._v(" "),_("ol",[_("li",[v._v("借用原生 h5 拖拽的实现")])]),v._v(" "),_("p",[v._v("业界比较知名的拖拽插件 "),_("a",{attrs:{href:""}},[v._v("react-dnd")]),v._v(" 不是很支持跨 iframe 的一个拖拽，而且低代码平台的设计里面是跨框架的，所以会采用原生的方式实现，")]),v._v(" "),_("p",[v._v("实现过程中，render 层拖拽（v1 版本 同事实现的）物料拖入的位置仅仅支持拖拽到物料的上一层，以及放置面板会发生闪烁的情况（具体原因忘记了）")]),v._v(" "),_("p",[_("img",{attrs:{src:"https://gitee.com/alvin0216/cdn/raw/master/images/drag.png",alt:""}})]),v._v(" "),_("p",[_("strong",[v._v("我的实现")]),v._v("，在 "),_("code",[v._v("container")]),v._v(" 层增加的 "),_("code",[v._v("drop")]),v._v(" 事件，判断 "),_("code",[v._v("target")]),v._v(" 对象。如果是物料，那么 "),_("code",[v._v("dropIndex")]),v._v(" 在 "),_("code",[v._v("target")]),v._v(" 的上一层，否则于最后一个。")]),v._v(" "),_("h3",{attrs:{id:"物料的动态导入功能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#物料的动态导入功能"}},[v._v("#")]),v._v(" 物料的动态导入功能")]),v._v(" "),_("p",[v._v("第一版的实现：通过懒加载 npm 包的方式进行加载物料。部署阶段：1. 部署拖拽层 => iframe 层 => 生产环境。")]),v._v(" "),_("p",[v._v("优化点 远程加载 umd & 微前端。")]),v._v(" "),_("p",[v._v("打包成 umd 的方式，我写了一个"),_("strong",[v._v("脚手架")]),v._v("，快速生成物料模板以及上传到 cdn 等等。")]),v._v(" "),_("h3",{attrs:{id:"灰度发布"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#灰度发布"}},[v._v("#")]),v._v(" 灰度发布")]),v._v(" "),_("p",[v._v("物料版本更新，在 v1 版本生成后的渲染数据，和 v2 版本不同怎么办？")]),v._v(" "),_("p",[_("strong",[v._v("原则上只做向下兼容，也就只增不减、如果差异大则考虑拆分。")])]),v._v(" "),_("p",[v._v("灰度会明显拉长产品发布的周期，灰度过程本身很复杂，灰度操作很容发生错误，如果遇到数据不兼容的时候，要考虑数据回滚。")]),v._v(" "),_("p",[v._v("灰度需要考虑 2 个点：低代码灰度 & 生产灰度。>>> 成本太高 不做灰度")]),v._v(" "),_("h3",{attrs:{id:"安全问题"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#安全问题"}},[v._v("#")]),v._v(" 安全问题")]),v._v(" "),_("p",[v._v("umd 物料，加载问题。有人攻击了请求，篡改 umd 地址！")]),v._v(" "),_("p",[v._v("解决：umd 域名安全控制，请求白名单等。")]),v._v(" "),_("h2",{attrs:{id:"有做过性能优化吗-优化的指标是什么"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#有做过性能优化吗-优化的指标是什么"}},[v._v("#")]),v._v(" 有做过性能优化吗？优化的指标是什么")]),v._v(" "),_("ol",[_("li",[v._v("统计过，同时加载 1000 个物料 ，并无卡顿。内部做了防抖以及节流。")])]),v._v(" "),_("p",[_("strong",[v._v("还可以优化的的点")])]),v._v(" "),_("ol",[_("li",[v._v("vscode 的物料模板的语法快捷提示。")]),v._v(" "),_("li",[v._v("物料生态。")]),v._v(" "),_("li",[v._v("错误监控")])]),v._v(" "),_("h2",{attrs:{id:"参考了哪些-有什么优势"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参考了哪些-有什么优势"}},[v._v("#")]),v._v(" 参考了哪些，有什么优势")]),v._v(" "),_("p",[v._v("参考有赞商城装修，优势：")]),v._v(" "),_("ol",[_("li",[v._v("百分百契合企业，接口 数据源等。")]),v._v(" "),_("li",[v._v("支持远程的 umd 加载，并且 sdk 支持到各个管理系统植入")])])])}),[],!1,null,null,null);t.default=r.exports}}]);