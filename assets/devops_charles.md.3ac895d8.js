import{_ as s,o as a,c as e,N as l}from"./chunks/framework.208f6f3f.js";const g=JSON.parse('{"title":"charles 抓包环境配置","description":"","frontmatter":{"title":"charles 抓包环境配置","date":"2019-07-15T13:00:28.000Z","sidebar":"auto","tags":["charles 抓包","前端工程化"],"categories":["前端工程化"]},"headers":[],"relativePath":"devops/charles.md","lastUpdated":1681197312000}'),n={name:"devops/charles.md"},o=l(`<p>环境 <code>mac</code> + <code>iphone</code></p><h2 id="安装-charles" tabindex="-1">安装 Charles <a class="header-anchor" href="#安装-charles" aria-label="Permalink to &quot;安装 Charles&quot;">​</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cask</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">charles</span></span>
<span class="line"></span></code></pre></div><p>根据下载的版本号 <a href="https://www.zzzmode.com/mytools/charles/" target="_blank" rel="noreferrer">破解 Charles</a></p><h2 id="配置-charles" tabindex="-1">配置 Charles <a class="header-anchor" href="#配置-charles" aria-label="Permalink to &quot;配置 Charles&quot;">​</a></h2><ol><li>获取本机的 IP 地址</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 获取本机的 ip 地址（方式很多 这里就直接用命令行）</span></span>
<span class="line"><span style="color:#FFCB6B;">ifconfig</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-oE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">inet.*netmask</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-oE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">(\\d+\\.){3}\\d+</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-n</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">2p</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>配置本机的代理端口</li></ol><p><code>Charles 菜单栏 -&gt; Proxy -&gt; Proxy Settings</code></p><p><img src="https://alvin-cdn.oss-cn-shenzhen.aliyuncs.com/images/proxy-settings.png" alt=""></p><ol start="3"><li>配置 iPhone 代理</li></ol><p><img src="https://alvin-cdn.oss-cn-shenzhen.aliyuncs.com/images/phone-proxy.png" alt=""></p><p>注意，这里链接的是同个局域网。现在可以开始抓 <code>http</code> 包了，但是还不可以抓取 <code>https</code></p><h2 id="抓取-https" tabindex="-1">抓取 HTTPS <a class="header-anchor" href="#抓取-https" aria-label="Permalink to &quot;抓取 HTTPS&quot;">​</a></h2><ol><li>在 <code>Charles 菜单栏 -&gt; Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate</code> 中可以为 PC 安装证书，图示配置如下：</li></ol><p><img src="https://alvin-cdn.oss-cn-shenzhen.aliyuncs.com/images/add-certificate.png" alt=""></p><p>证书可以在 Mac 的钥匙串中查看，双击证书，将信任权限设定为始终信任。图示如下：</p><p><img src="https://alvin-cdn.oss-cn-shenzhen.aliyuncs.com/images/auth-certificate.png" alt=""></p><ol start="2"><li>iPhone 安装证书</li></ol><p>在 <code>Charles 菜单栏 -&gt; Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate on a Mobile Device or Remote Browser</code> 中查看最新的官方证书下载地址。图示如下：</p><p><img src="https://alvin-cdn.oss-cn-shenzhen.aliyuncs.com/images/phone-certificate.png" alt=""></p><p>下载并安装描述文件。之后在到 <code>iPhone 设置 -&gt; 关于本机 -&gt; 证书信任设置</code>中启用根证书。图示如下：</p><p><img src="https://alvin-cdn.oss-cn-shenzhen.aliyuncs.com/images/phone-auth-certificate.png" alt=""></p><p>这样，就可以使用 Charles 中抓包 iPhone 发出的 HTTPS 请求并预览明文数据了。</p><p><a href="https://juejin.im/post/5c4ed14f6fb9a049ed3142cc" target="_blank" rel="noreferrer">iOS Charles 抓包</a></p><h2 id="另外也推荐-whistle" tabindex="-1">另外也推荐 whistle <a class="header-anchor" href="#另外也推荐-whistle" aria-label="Permalink to &quot;另外也推荐 whistle&quot;">​</a></h2><p><a href="https://blog.csdn.net/weixin_42534940/article/details/88783455" target="_blank" rel="noreferrer">【MAC 工具】手机抓包工具之 —— whistle</a></p>`,27),t=[o];function p(c,r,i,h,d,C){return a(),e("div",null,t)}const m=s(n,[["render",p]]);export{g as __pageData,m as default};
